/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/components/CardDescription/CardDescription.scss":
/*!*************************************************************!*\
  !*** ./src/components/CardDescription/CardDescription.scss ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://valkyrscenecards/./src/components/CardDescription/CardDescription.scss?");

/***/ }),

/***/ "./src/components/PerformerList/PerformerList.scss":
/*!*********************************************************!*\
  !*** ./src/components/PerformerList/PerformerList.scss ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://valkyrscenecards/./src/components/PerformerList/PerformerList.scss?");

/***/ }),

/***/ "./src/styles.scss":
/*!*************************!*\
  !*** ./src/styles.scss ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://valkyrscenecards/./src/styles.scss?");

/***/ }),

/***/ "./src/components/CardDescription/CardDescription.tsx":
/*!************************************************************!*\
  !*** ./src/components/CardDescription/CardDescription.tsx ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n__webpack_require__(/*! ./CardDescription.scss */ \"./src/components/CardDescription/CardDescription.scss\");\nconst helpers_1 = __webpack_require__(/*! ../../helpers */ \"./src/helpers/index.ts\");\nconst PerformerList_1 = __importDefault(__webpack_require__(/*! ../PerformerList/PerformerList */ \"./src/components/PerformerList/PerformerList.tsx\"));\nconst { React } = window.PluginApi;\nconst { HoverPopover, Icon } = window.PluginApi.components;\nconst { faBox, faStar } = window.PluginApi.libraries.FontAwesomeSolid;\nconst CardDescription = (props) => {\n    var _a, _b;\n    const link = `/scenes/${props.scene.id}`;\n    const file = props.scene.files[0];\n    const duration = helpers_1.TextUtils.secondsToTimestamp(file.duration);\n    const resolution = helpers_1.TextUtils.resolution(file.width, file.height);\n    let shortRes = \"\";\n    const rating = +((_a = props.scene.rating100) !== null && _a !== void 0 ? _a : 0) > 0 ? (React.createElement(\"span\", { className: \"vsc-card-description__rating\" },\n        (props.scene.rating100 || 0) / 10,\n        React.createElement(Icon, { icon: faStar }))) : null;\n    const organized = props.scene.organized ? (React.createElement(\"span\", { className: \"vsc-card-description__organized\" },\n        React.createElement(Icon, { icon: faBox }))) : null;\n    switch (resolution) {\n        case \"144p\":\n        case \"240p\":\n        case \"360p\":\n        case \"480p\":\n        case \"540p\":\n            shortRes = \"SD\";\n            break;\n        case \"720p\":\n        case \"1080p\":\n            shortRes = \"HD\";\n            break;\n        case \"1440p\":\n            shortRes = \"2K\";\n            break;\n        default:\n            shortRes = resolution || null;\n            break;\n    }\n    return (React.createElement(\"div\", { className: \"scene-card__details\" },\n        React.createElement(\"div\", { className: \"vsc-card-description__small-bar\" },\n            React.createElement(\"span\", { className: \"vsc-card-description__studio\" }, (_b = props.scene.studio) === null || _b === void 0 ? void 0 : _b.name),\n            React.createElement(\"div\", { className: \"vsc-card-description__file-data\" },\n                React.createElement(\"span\", { className: \"vsc-card-description__duration\" }, duration),\n                shortRes ? (React.createElement(HoverPopover, { className: \"vsc-card-description__resolution\", content: React.createElement(\"span\", { className: \"vsc-card-description__resolution-hover\" }, resolution), leaveDelay: 100, placement: \"top\" }, shortRes)) : null,\n                organized)),\n        React.createElement(\"a\", { href: link },\n            React.createElement(\"h5\", { className: \"card-section-title flex-aligned\" }, props.scene.title)),\n        React.createElement(\"div\", { className: \"scene-card__description vsc-card-description__details\" },\n            React.createElement(\"div\", { className: \"vsc-card-description__details-inner\" }, props.scene.details)),\n        React.createElement(PerformerList_1.default, { performers: props.scene.performers, pluginConfig: props.pluginConfig, scene: props.scene }),\n        React.createElement(\"div\", { className: \"vsc-card-description__foot\" },\n            React.createElement(\"span\", { className: \"vsc-card-description__date\" }, props.scene.date),\n            rating)));\n};\nexports[\"default\"] = CardDescription;\n\n\n//# sourceURL=webpack://valkyrscenecards/./src/components/CardDescription/CardDescription.tsx?");

/***/ }),

/***/ "./src/components/PerformerList/PerformerList.tsx":
/*!********************************************************!*\
  !*** ./src/components/PerformerList/PerformerList.tsx ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst classnames_1 = __importDefault(__webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\"));\nconst sort_1 = __webpack_require__(/*! ../../helpers/sort */ \"./src/helpers/sort.ts\");\n__webpack_require__(/*! ./PerformerList.scss */ \"./src/components/PerformerList/PerformerList.scss\");\nconst helpers_1 = __webpack_require__(/*! ../../helpers */ \"./src/helpers/index.ts\");\nconst { PluginApi } = window;\nconst { GQL, React } = PluginApi;\nconst { faMars, faTansgenderAlt, faVenus } = window.PluginApi.libraries.FontAwesomeSolid;\nconst PerformerList = (props) => {\n    const { Icon } = PluginApi.components;\n    const { performerAvatarsActive, performerAvatarsProfile, performerAvatarsSizeLarge, performerAvatarsTagID, } = props.pluginConfig;\n    const sortedPerformers = (0, sort_1.sortPerformers)(props.performers);\n    if (performerAvatarsActive) {\n        const qProfileImages = GQL.useFindPerformersQuery({\n            variables: {\n                filter: { per_page: -1 },\n                performer_ids: sortedPerformers.map((pf) => +pf.id),\n            },\n        });\n        const qAvatars = GQL.useFindImagesQuery({\n            variables: {\n                filter: { per_page: -1 },\n                image_filter: {\n                    performers: {\n                        modifier: \"INCLUDES\" /* CriterionModifier.Includes */,\n                        value: sortedPerformers.map((pf) => pf.id),\n                    },\n                    tags: {\n                        modifier: \"INCLUDES\" /* CriterionModifier.Includes */,\n                        value: [performerAvatarsTagID],\n                    },\n                },\n            },\n        });\n        if (qAvatars.loading || qProfileImages.loading)\n            return null;\n        const avatarListClasses = (0, classnames_1.default)(\"vsc-performer-list\", \"vsc-performer-list__avatar-list\", {\n            [\"vsc-performer-list__avatar-list--large\"]: performerAvatarsSizeLarge,\n        });\n        return (React.createElement(\"div\", { className: avatarListClasses }, sortedPerformers.map((p, i) => {\n            var _a, _b;\n            const avatarUrl = getPerformerAvatarUrl({\n                avatarsQuery: (_a = qAvatars.data) === null || _a === void 0 ? void 0 : _a.findImages,\n                avatarTag: performerAvatarsTagID,\n                id: p.id,\n                profileImagesQuery: (_b = qProfileImages.data) === null || _b === void 0 ? void 0 : _b.findPerformers,\n            });\n            const useCustomAvatar = !!performerAvatarsTagID && !!avatarUrl.custom;\n            const useProfileImage = performerAvatarsProfile && !!avatarUrl.profile;\n            // Card inline styles. Descending z-index to put left-most cards on top.\n            const inlineStyles = { zIndex: sortedPerformers.length - (i + 1) };\n            if (useCustomAvatar || useProfileImage) {\n                const avatarClasses = (0, classnames_1.default)(\"vsc-performer-list__avatar\", {\n                    [\"vsc-performer-list__avatar--custom\"]: useCustomAvatar,\n                    [\"vsc-performer-list__avatar--profile\"]: !useCustomAvatar,\n                });\n                return (React.createElement(\"div\", { style: inlineStyles },\n                    React.createElement(PerformerPopover, { performer: p, releaseDate: props.scene.date },\n                        React.createElement(\"span\", { className: avatarClasses },\n                            React.createElement(\"a\", { href: `/performers/${p.id}` },\n                                React.createElement(\"img\", { src: useCustomAvatar\n                                        ? avatarUrl.custom\n                                        : avatarUrl.profile, alt: p.name }))))));\n            }\n            else {\n                const names = p.name.split(\" \");\n                let initials = \"\";\n                names.forEach((n, i) => {\n                    if (i === 0 || i === names.length - 1) {\n                        initials += n.split(\"\")[0];\n                    }\n                });\n                const genderIcon = getPerformerGenderIcon(p.gender);\n                return (React.createElement(\"div\", { style: inlineStyles },\n                    React.createElement(PerformerPopover, { performer: p, releaseDate: props.scene.date },\n                        React.createElement(\"span\", { className: \"vsc-performer-list__avatar\" },\n                            React.createElement(\"a\", { href: `/performers/${p.id}` },\n                                React.createElement(\"span\", null, initials),\n                                !!genderIcon ? React.createElement(Icon, { icon: genderIcon }) : null)))));\n            }\n        })));\n    }\n    else {\n        return (React.createElement(\"div\", { className: \"vsc-performer-list\" }, sortedPerformers.map((p, i) => {\n            const totalPerformers = props.performers.length;\n            const isOneBeforeLast = i === totalPerformers - 2;\n            const isAnyBeforeLast = i < totalPerformers - 1;\n            let suffix = null;\n            if (totalPerformers === 2 && isOneBeforeLast)\n                suffix = \" and \";\n            else {\n                if (isAnyBeforeLast)\n                    suffix = \", \";\n                if (isOneBeforeLast)\n                    suffix += \"and \";\n            }\n            return (React.createElement(React.Fragment, null,\n                React.createElement(\"a\", { href: `/performers/${p.id}` },\n                    React.createElement(\"span\", null, p.name)),\n                suffix));\n        })));\n    }\n};\nexports[\"default\"] = PerformerList;\nconst getPerformerAvatarUrl = (args) => {\n    var _a, _b, _c, _d;\n    const avatarUrl = (_b = (_a = args.avatarsQuery) === null || _a === void 0 ? void 0 : _a.images.find((img) => img.performers.find((pf) => pf.id === args.id))) === null || _b === void 0 ? void 0 : _b.paths.image;\n    const profileImageUrl = (_d = (_c = args.profileImagesQuery) === null || _c === void 0 ? void 0 : _c.performers.find((pf) => pf.id === args.id)) === null || _d === void 0 ? void 0 : _d.image_path;\n    // Don't return the native default image\n    const url = {\n        custom: avatarUrl,\n        profile: !(profileImageUrl === null || profileImageUrl === void 0 ? void 0 : profileImageUrl.includes(\"default=true\"))\n            ? profileImageUrl\n            : undefined,\n    };\n    return url;\n};\nconst getPerformerGenderIcon = (gender) => {\n    switch (gender) {\n        case undefined:\n            return null;\n        case \"FEMALE\":\n            return faVenus;\n        case \"MALE\":\n            return faMars;\n        default:\n            return faTansgenderAlt;\n    }\n};\nconst PerformerPopover = (_a) => {\n    var { performer, releaseDate } = _a, props = __rest(_a, [\"performer\", \"releaseDate\"]);\n    const { HoverPopover } = PluginApi.components;\n    const qPerformer = GQL.useFindPerformerQuery({\n        variables: { id: performer.id },\n    });\n    if (qPerformer.loading)\n        return null;\n    const Content = () => {\n        var _a;\n        const birthdate = (_a = qPerformer.data.findPerformer) === null || _a === void 0 ? void 0 : _a.birthdate;\n        return (React.createElement(\"span\", { className: \"vsc-performer-list__performer-hover\" },\n            performer.name,\n            birthdate && releaseDate\n                ? \" (\" + helpers_1.TextUtils.age(birthdate, releaseDate) + \")\"\n                : null));\n    };\n    return (React.createElement(HoverPopover, { content: React.createElement(Content, null), children: props.children, leaveDelay: 100, placement: \"top\" }));\n};\n\n\n//# sourceURL=webpack://valkyrscenecards/./src/components/PerformerList/PerformerList.tsx?");

/***/ }),

/***/ "./src/helpers/index.ts":
/*!******************************!*\
  !*** ./src/helpers/index.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TextUtils = exports.SortUtils = void 0;\nvar sort_1 = __webpack_require__(/*! ./sort */ \"./src/helpers/sort.ts\");\nObject.defineProperty(exports, \"SortUtils\", ({ enumerable: true, get: function () { return __importDefault(sort_1).default; } }));\nvar text_1 = __webpack_require__(/*! ./text */ \"./src/helpers/text.ts\");\nObject.defineProperty(exports, \"TextUtils\", ({ enumerable: true, get: function () { return __importDefault(text_1).default; } }));\n\n\n//# sourceURL=webpack://valkyrscenecards/./src/helpers/index.ts?");

/***/ }),

/***/ "./src/helpers/sort.ts":
/*!*****************************!*\
  !*** ./src/helpers/sort.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.GENDERS = void 0;\nexports.sortPerformers = sortPerformers;\nfunction sortPerformers(performers) {\n    const ret = performers.slice();\n    ret.sort((a, b) => {\n        var _a, _b;\n        if (a.gender === b.gender) {\n            // sort by name\n            return ((_a = a.name) !== null && _a !== void 0 ? _a : \"\").localeCompare((_b = b.name) !== null && _b !== void 0 ? _b : \"\");\n        }\n        // TODO - may want to customise gender order\n        const aIndex = a.gender ? exports.GENDERS.indexOf(a.gender) : exports.GENDERS.length;\n        const bIndex = b.gender ? exports.GENDERS.indexOf(b.gender) : exports.GENDERS.length;\n        return aIndex - bIndex;\n    });\n    return ret;\n}\nconst SortUtils = {\n    sortPerformers,\n};\nexports[\"default\"] = SortUtils;\n/** `enum GenderEnum` as an array. */\nexports.GENDERS = [\n    \"FEMALE\",\n    \"TRANSGENDER_FEMALE\",\n    \"MALE\",\n    \"TRANSGENDER_MALE\",\n    \"INTERSEX\",\n    \"NON_BINARY\",\n];\n\n\n//# sourceURL=webpack://valkyrscenecards/./src/helpers/sort.ts?");

/***/ }),

/***/ "./src/helpers/text.ts":
/*!*****************************!*\
  !*** ./src/helpers/text.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst Units = [\n    \"byte\",\n    \"kilobyte\",\n    \"megabyte\",\n    \"gigabyte\",\n    \"terabyte\",\n    \"petabyte\",\n];\nconst shortUnits = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\nconst fileSize = (bytes = 0) => {\n    if (Number.isNaN(parseFloat(String(bytes))) || !Number.isFinite(bytes))\n        return { size: 0, unit: Units[0] };\n    let unit = 0;\n    let count = bytes;\n    while (count >= 1024 && unit + 1 < Units.length) {\n        count /= 1024;\n        unit++;\n    }\n    return {\n        size: count,\n        unit: Units[unit],\n    };\n};\nclass DurationUnit {\n    constructor(singular, plural, shortString, secs) {\n        this.singular = singular;\n        this.plural = plural;\n        this.shortString = shortString;\n        this.secs = secs;\n    }\n    toString() {\n        return this.shortString;\n    }\n}\nDurationUnit.SECOND = new DurationUnit(\"second\", \"seconds\", \"s\", 1);\nDurationUnit.MINUTE = new DurationUnit(\"minute\", \"minutes\", \"m\", 60);\nDurationUnit.HOUR = new DurationUnit(\"hour\", \"hours\", \"h\", DurationUnit.MINUTE.secs * 60);\nDurationUnit.DAY = new DurationUnit(\"day\", \"days\", \"D\", DurationUnit.HOUR.secs * 24);\nDurationUnit.WEEK = new DurationUnit(\"week\", \"weeks\", \"W\", DurationUnit.DAY.secs * 7);\nDurationUnit.MONTH = new DurationUnit(\"month\", \"months\", \"M\", DurationUnit.DAY.secs * 30);\nDurationUnit.YEAR = new DurationUnit(\"year\", \"years\", \"Y\", DurationUnit.DAY.secs * 365);\nDurationUnit.DURATIONS = [\n    DurationUnit.SECOND,\n    DurationUnit.MINUTE,\n    DurationUnit.HOUR,\n    DurationUnit.DAY,\n    DurationUnit.WEEK,\n    DurationUnit.MONTH,\n    DurationUnit.YEAR,\n];\nclass DurationCount {\n    constructor(count, duration) {\n        this.count = count;\n        this.duration = duration;\n    }\n    toString() {\n        return this.count.toString() + this.duration.toString();\n    }\n}\nconst secondsAsTime = (seconds = 0) => {\n    if (Number.isNaN(parseFloat(String(seconds))) || !Number.isFinite(seconds))\n        return [new DurationCount(0, DurationUnit.DURATIONS[0])];\n    const result = [];\n    let remainingSeconds = seconds;\n    // Run down the possible durations and pull them out\n    for (let i = DurationUnit.DURATIONS.length - 1; i >= 0; i--) {\n        const q = Math.floor(remainingSeconds / DurationUnit.DURATIONS[i].secs);\n        if (q !== 0) {\n            remainingSeconds %= DurationUnit.DURATIONS[i].secs;\n            result.push(new DurationCount(q, DurationUnit.DURATIONS[i]));\n        }\n    }\n    return result;\n};\nconst secondsAsTimeString = (seconds = 0, maxUnitCount = 2) => {\n    return secondsAsTime(seconds).slice(0, maxUnitCount).join(\" \");\n};\nconst formatFileSizeUnit = (u) => {\n    const i = Units.indexOf(u);\n    return shortUnits[i];\n};\n// returns the number of fractional digits to use when displaying file sizes\n// returns 0 for MB and under, 1 for GB and over.\nconst fileSizeFractionalDigits = (unit) => {\n    if (Units.indexOf(unit) >= 3) {\n        return 1;\n    }\n    return 0;\n};\n// Converts seconds to a hh:mm:ss or mm:ss timestamp.\n// A negative input will result in a -hh:mm:ss or -mm:ss output.\n// Fractional inputs are truncated.\nconst secondsToTimestamp = (seconds) => {\n    let neg = false;\n    if (seconds < 0) {\n        neg = true;\n        seconds = -seconds;\n    }\n    seconds = Math.trunc(seconds);\n    const s = seconds % 60;\n    seconds = (seconds - s) / 60;\n    const m = seconds % 60;\n    seconds = (seconds - m) / 60;\n    const h = seconds;\n    let ret = String(s).padStart(2, \"0\");\n    if (h === 0) {\n        ret = String(m) + \":\" + ret;\n    }\n    else {\n        ret = String(m).padStart(2, \"0\") + \":\" + ret;\n        ret = String(h) + \":\" + ret;\n    }\n    if (neg) {\n        return \"-\" + ret;\n    }\n    else {\n        return ret;\n    }\n};\nconst timestampToSeconds = (v) => {\n    if (!v) {\n        return null;\n    }\n    const splits = v.split(\":\");\n    if (splits.length > 3) {\n        return null;\n    }\n    let seconds = 0;\n    let factor = 1;\n    while (splits.length > 0) {\n        const thisSplit = splits.pop();\n        if (thisSplit === undefined) {\n            return null;\n        }\n        const thisInt = parseInt(thisSplit, 10);\n        if (Number.isNaN(thisInt)) {\n            return null;\n        }\n        seconds += factor * thisInt;\n        factor *= 60;\n    }\n    return seconds;\n};\nconst fileNameFromPath = (path) => {\n    if (!!path === false)\n        return \"No File Name\";\n    return path.replace(/^.*[\\\\/]/, \"\");\n};\nconst stringToDate = (dateString) => {\n    if (!dateString)\n        return null;\n    const parts = dateString.split(\"-\");\n    // Invalid date string\n    if (parts.length !== 3)\n        return null;\n    const year = Number(parts[0]);\n    const monthIndex = Math.max(0, Number(parts[1]) - 1);\n    const day = Number(parts[2]);\n    return new Date(year, monthIndex, day, 0, 0, 0, 0);\n};\nconst stringToFuzzyDate = (dateString) => {\n    if (!dateString)\n        return null;\n    const parts = dateString.split(\"-\");\n    // Invalid date string\n    let year = Number(parts[0]);\n    if (isNaN(year))\n        year = new Date().getFullYear();\n    let monthIndex = 0;\n    if (parts.length > 1) {\n        monthIndex = Math.max(0, Number(parts[1]) - 1);\n        if (monthIndex > 11 || isNaN(monthIndex))\n            monthIndex = 0;\n    }\n    let day = 1;\n    if (parts.length > 2) {\n        day = Number(parts[2]);\n        if (day > 31 || isNaN(day))\n            day = 1;\n    }\n    return new Date(year, monthIndex, day, 0, 0, 0, 0);\n};\nconst stringToFuzzyDateTime = (dateString) => {\n    if (!dateString)\n        return null;\n    const dateTime = dateString.split(\" \");\n    let date = null;\n    if (dateTime.length > 0) {\n        date = stringToFuzzyDate(dateTime[0]);\n    }\n    if (!date) {\n        date = new Date();\n    }\n    if (dateTime.length > 1) {\n        const timeParts = dateTime[1].split(\":\");\n        if (date && timeParts.length > 0) {\n            date.setHours(Number(timeParts[0]));\n        }\n        if (date && timeParts.length > 1) {\n            date.setMinutes(Number(timeParts[1]));\n        }\n        if (date && timeParts.length > 2) {\n            date.setSeconds(Number(timeParts[2]));\n        }\n    }\n    return date;\n};\nfunction dateToString(date) {\n    return `${date.getFullYear()}-${(date.getMonth() + 1)\n        .toString()\n        .padStart(2, \"0\")}-${date.getDate().toString().padStart(2, \"0\")}`;\n}\nfunction dateTimeToString(date) {\n    return `${dateToString(date)} ${date\n        .getHours()\n        .toString()\n        .padStart(2, \"0\")}:${date.getMinutes().toString().padStart(2, \"0\")}`;\n}\nconst getAge = (dateString, fromDateString) => {\n    if (!dateString)\n        return 0;\n    const birthdate = stringToDate(dateString);\n    const fromDate = fromDateString ? stringToDate(fromDateString) : new Date();\n    if (!birthdate || !fromDate)\n        return 0;\n    let age = fromDate.getFullYear() - birthdate.getFullYear();\n    if (birthdate.getMonth() > fromDate.getMonth() ||\n        (birthdate.getMonth() >= fromDate.getMonth() &&\n            birthdate.getDate() > fromDate.getDate())) {\n        age -= 1;\n    }\n    return age;\n};\nconst bitRate = (bitrate) => {\n    const megabits = bitrate / 1000000;\n    return `${megabits.toFixed(2)} megabits per second`;\n};\nconst resolution = (width, height) => {\n    const number = width > height ? height : width;\n    if (number >= 6144) {\n        return \"HUGE\";\n    }\n    if (number >= 3840) {\n        return \"8K\";\n    }\n    if (number >= 3584) {\n        return \"7K\";\n    }\n    if (number >= 3000) {\n        return \"6K\";\n    }\n    if (number >= 2560) {\n        return \"5K\";\n    }\n    if (number >= 1920) {\n        return \"4K\";\n    }\n    if (number >= 1440) {\n        return \"1440p\";\n    }\n    if (number >= 1080) {\n        return \"1080p\";\n    }\n    if (number >= 720) {\n        return \"720p\";\n    }\n    if (number >= 540) {\n        return \"540p\";\n    }\n    if (number >= 480) {\n        return \"480p\";\n    }\n    if (number >= 360) {\n        return \"360p\";\n    }\n    if (number >= 240) {\n        return \"240p\";\n    }\n    if (number >= 144) {\n        return \"144p\";\n    }\n};\nconst sanitiseURL = (url, siteURL) => {\n    if (!url) {\n        return url;\n    }\n    if (url.startsWith(\"http://\") || url.startsWith(\"https://\")) {\n        // just return the entire URL\n        return url;\n    }\n    if (siteURL) {\n        // if url starts with the site host, then prepend the protocol\n        if (url.startsWith(siteURL.host)) {\n            return `${siteURL.protocol}//${url}`;\n        }\n        // otherwise, construct the url from the protocol, host and passed url\n        return `${siteURL.protocol}//${siteURL.host}/${url}`;\n    }\n    // just prepend the protocol - assume https\n    return `https://${url}`;\n};\nconst domainFromURL = (urlString, url) => {\n    if (url) {\n        return url.hostname;\n    }\n    else if (urlString) {\n        var urlDomain = \"\";\n        try {\n            var sanitizedUrl = sanitiseURL(urlString);\n            if (sanitizedUrl) {\n                urlString = sanitizedUrl;\n            }\n            urlDomain = new URL(urlString).hostname;\n        }\n        catch (_a) {\n            urlDomain = urlString; // We cant determine the hostname so we return the base string\n        }\n        return urlDomain;\n    }\n    else {\n        return \"\";\n    }\n};\nconst formatDate = (intl, date, utc = true) => {\n    if (!date) {\n        return \"\";\n    }\n    return intl.formatDate(date, {\n        format: \"long\",\n        timeZone: utc ? \"utc\" : undefined,\n    });\n};\nconst formatDateTime = (intl, dateTime, utc = false) => `${formatDate(intl, dateTime, utc)} ${intl.formatTime(dateTime, {\n    timeZone: utc ? \"utc\" : undefined,\n})}`;\nconst CountUnits = [\"\", \"K\", \"M\", \"B\"];\nconst abbreviateCounter = (counter = 0) => {\n    if (Number.isNaN(parseFloat(String(counter))) || !Number.isFinite(counter))\n        return { size: 0, unit: CountUnits[0] };\n    let unit = 0;\n    let digits = 0;\n    let count = counter;\n    while (count >= 1000 && unit + 1 < CountUnits.length) {\n        count /= 1000;\n        unit++;\n        digits = 1;\n    }\n    return {\n        size: count,\n        unit: CountUnits[unit],\n        digits: digits,\n    };\n};\n/*\n * Trims quotes if the text has leading/trailing quotes\n */\nconst stripQuotes = (text) => {\n    if (text.startsWith('\"') && text.endsWith('\"'))\n        return text.slice(1, -1);\n    return text;\n};\n/*\n * Wraps string in quotes\n */\nconst addQuotes = (text) => `\"${text}\"`;\nconst TextUtils = {\n    fileSize,\n    formatFileSizeUnit,\n    fileSizeFractionalDigits,\n    secondsToTimestamp,\n    timestampToSeconds,\n    fileNameFromPath,\n    stringToDate,\n    stringToFuzzyDate,\n    stringToFuzzyDateTime,\n    dateToString,\n    dateTimeToString,\n    age: getAge,\n    bitRate,\n    resolution,\n    sanitiseURL,\n    domainFromURL,\n    formatDate,\n    formatDateTime,\n    secondsAsTimeString,\n    abbreviateCounter,\n    stripQuotes,\n    addQuotes,\n};\nexports[\"default\"] = TextUtils;\n\n\n//# sourceURL=webpack://valkyrscenecards/./src/helpers/text.ts?");

/***/ }),

/***/ "./src/main.tsx":
/*!**********************!*\
  !*** ./src/main.tsx ***!
  \**********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst CardDescription_1 = __importDefault(__webpack_require__(/*! ./components/CardDescription/CardDescription */ \"./src/components/CardDescription/CardDescription.tsx\"));\n__webpack_require__(/*! ./styles.scss */ \"./src/styles.scss\");\nconst { PluginApi } = window;\nconst { GQL, React } = PluginApi;\n// Remove overlays\nPluginApi.patch.instead(\"SceneCard.Details\", function (props) {\n    const qConfig = GQL.useConfigurationQuery();\n    const dataLoading = qConfig.loading;\n    if (dataLoading)\n        return [];\n    const userConfig = qConfig.data.configuration.plugins\n        .ValkyrSceneCards;\n    // Compile the user's config with config defaults\n    const pluginConfig = {\n        performerAvatarsActive: getConfigProp(userConfig === null || userConfig === void 0 ? void 0 : userConfig.performerAvatarsActive, false),\n        performerAvatarsProfile: getConfigProp(userConfig === null || userConfig === void 0 ? void 0 : userConfig.performerAvatarsProfile, false),\n        performerAvatarsSizeLarge: getConfigProp(userConfig === null || userConfig === void 0 ? void 0 : userConfig.performerAvatarsSizeLarge, false),\n        performerAvatarsTagID: getConfigProp(userConfig === null || userConfig === void 0 ? void 0 : userConfig.performerAvatarsTagID, \"\"),\n    };\n    return [React.createElement(CardDescription_1.default, Object.assign({}, props, { pluginConfig: pluginConfig }))];\n});\n// Remove overlays\nPluginApi.patch.instead(\"SceneCard.Overlays\", function () {\n    return [];\n});\n// Remove popovers\nPluginApi.patch.instead(\"SceneCard.Popovers\", function () {\n    return [];\n});\n/** Returns the given property from the user's config, or the default value if\n * the user hasn't explicitly set it. */\nfunction getConfigProp(value, defaultValue) {\n    return value !== null && value !== void 0 ? value : defaultValue;\n}\n\n\n//# sourceURL=webpack://valkyrscenecards/./src/main.tsx?");

/***/ }),

/***/ "./node_modules/classnames/index.js":
/*!******************************************!*\
  !*** ./node_modules/classnames/index.js ***!
  \******************************************/
/***/ ((module, exports) => {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif ( true && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (true) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn classNames;\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {}\n}());\n\n\n//# sourceURL=webpack://valkyrscenecards/./node_modules/classnames/index.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.tsx");
/******/ 	
/******/ })()
;